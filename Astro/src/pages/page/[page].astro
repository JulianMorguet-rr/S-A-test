---
import { fade, slide  } from 'astro:transitions';

import { PageContent } from '../../types/PageContent';

import Layout from "../../layouts/Base.astro";
import Hero from '../../components/Hero.astro'
import PageBuilder from '../../components/PageBuilder.astro'

// "getStaticPaths()" is only required for SSG pages
export async function getStaticPaths() {
    return [
        { params: { page: 'testpage' }, props: { /* optional */ } },
    ]
}

import { urlFor } from '../../lib/sanityApi.js';

const { page } =  Astro.params

const pageJSON = JSON.stringify(page)

import { getCurrentPage } from '../../lib/sanityApi.js';




const pageContent: PageContent = await getCurrentPage(`/${page}`);

console.log('pageContent: ', pageContent)
---

<Layout>
    
    <Hero pageContent={pageContent} />
    
    <main>
        {pageContent.pageBuilder.map(contentItem => (
            // pageContent._type === 'hero' && <h3> {JSON.stringify(pageContent)}</h3> <br><br>
            <PageBuilder contentItem={contentItem}/>
            // <p>{JSON.stringify(pageContent)}</p>
        ))}

	</main>
</Layout>


<style lang="scss">
    main {
        padding: 2rem 0;
    }

    .z-front {
        z-index: 999;
    }
</style>