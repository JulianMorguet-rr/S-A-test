---
import BlockContent from "./BlockContent.astro";

const { item, pageBuilder } = Astro.props;

---


<div class="tab ">
    <div class="inner-wrapper block">
        <input type="checkbox" id={item._key} name="accordion-checkbox" hidden/>
        <label class="accordion-header flex" for={item._key}>
            <div class="headings">
                {
                    item.tagline && <p>{item.tagline}</p>
                }
                {
                    item.heading && <h3 class="text-3xl py-0 my-0 tracking-tight font-extrabold text-gray-900">{item.heading}</h3>
                }
                {
                    item.icon && <div class="accordion-icon"></div>
                }
            </div>
            <div class="toggle-icon">
                <span></span>
                <span></span>
            </div>
        </label>
        <div class="tab__content accordion-body">
            <BlockContent data={pageBuilder.blockContent} />
        </div>
    </div>
</div>



<style lang="scss"> 


/* Core styles btw. functionality */

.tab input {
  position: absolute;
  opacity: 0;
  z-index: -1;
}
.tab__content {
  max-height: 0;
  overflow: hidden;
  transition: all 0.35s;
}
.tab input:checked ~ .tab__content {
  max-height: 10rem;
}

/* Visual styles */
.accordion {
  color: var(--theme);
  overflow: hidden;
}
.tab__label,
.tab__close {
  display: flex;
  color: white;
  background: var(--theme);
  cursor: pointer;
}
.tab__label {
  justify-content: space-between;
  padding: 1rem;
}
.tab__label::after {
  content: "\276F";
  width: 1em;
  height: 1em;
  text-align: center;
  transform: rotate(90deg);
  transition: all 0.35s;
}
.tab input:checked + .tab__label::after {
  transform: rotate(270deg);
}
.tab__content p {
  margin: 0;
  padding: 1rem;
}
.tab__close {
  justify-content: flex-end;
  padding: 0.5rem 1rem;
  font-size: 0.75rem;
}
/* Arrow animation */
.tab input:not(:checked) + .tab__label:hover::after {
  animation: bounce .5s infinite;
}
@keyframes bounce {
  25% {
    transform: rotate(90deg) translate(.25rem);
  }
  75% {
    transform: rotate(90deg) translate(-.25rem);
  }
}




/* Own Styles */

.accordion-header {
    cursor: pointer;
    justify-content: space-between;

    .headings {
        flex-grow: 4;
    }

    .toggle-icon {
        position: relative;
        width: 40px;
        height: 40px;

        span {
            display: block;
            width: 100%;
            height: 4px;
            background: #000;
            position: absolute;
            left: 0;
            transition: all 0.35s;

            &:first-child {
                top: 50%;
                rotate: 90deg;
            }
            &:last-child {
                top: 50%;
                
            }
        }
    }
}

.tab input:checked  ~ .accordion-header {

    .toggle-icon {

        span {
            &:first-child {
                rotate: 360deg;
            }
            &:last-child {
                rotate: 180deg;
            }
        }
    }

}


.tab {

    .inner-wrapper {
        padding: 1rem 0;
        border-top: solid 2px;    
    }

    &:last-child .inner-wrapper  {
        border-bottom: solid 2px;
    }
}


</style>